var Sprite=Laya.Sprite,Component=Laya.Component,Label=laya.ui.Label,TextInput=Laya.TextInput,TextArea=Laya.TextArea,Button=laya.ui.Button,CheckBox=laya.ui.CheckBox,Clip=laya.ui.Clip,ColorPicker=laya.ui.ColorPicker,ComboBox=laya.ui.ComboBox,Box=Laya.Box,List=Laya.List,RadioGroup=Laya.RadioGroup,ViewStack=Laya.ViewStack,ProgressBar=Laya.ProgressBar,Radio=Laya.Radio,ScrollBar=Laya.ScrollBar,Slider=Laya.Slider,HScrollBar=Laya.HScrollBar,VSlider=Laya.VSlider,HSlider=Laya.HSlider,Tab=laya.ui.Tab,Panel=Laya.Panel,Tree=Laya.Tree,View=laya.ui.View,Dialog=laya.ui.Dialog,Handler=laya.utils.Handler,Loader=Laya.Loader,Byte=laya.utils.Byte,Texture=Laya.Texture,Matrix=laya.maths.Matrix,Graphics=Laya.Graphics,Dictionary=laya.utils.Dictionary,Point=laya.maths.Point,Animation=laya.display.Animation,Tween=laya.utils.Tween,Ease=laya.utils.Ease,SoundManager=laya.media.SoundManager,LayaEvent=Laya.Event,LayaNode=Laya.Node,LocalStorage=laya.net.LocalStorage,EventDispatcher=laya.events.EventDispatcher,HTMLDivElements=laya.html.dom.HTMLDivElement,Images=Laya.Image,HTMLImage=laya.resource.HTMLImage,Texts=laya.display.Text,UIUtils=laya.ui.UIUtils,WorkerLoader=laya.net.WorkerLoader,Rectangle=Laya.Rectangle;window.Sprite=Sprite,window.Component=Component,window.Label=Label,window.TextInput=TextInput,window.TextArea=TextArea,window.Button=Button,window.CheckBox=CheckBox,window.Clip=Clip,window.ColorPicker=ColorPicker,window.ComboBox=ComboBox,window.Box=Box,window.List=List,window.RadioGroup=RadioGroup,window.ViewStack=ViewStack,window.ProgressBar=ProgressBar,window.Radio=Radio,window.ScrollBar=ScrollBar,window.Slider=Slider,window.HScrollBar=HScrollBar,window.VSlider=VSlider,window.HSlider=HSlider,window.Tab=Tab,window.Panel=Panel,window.Tree=Tree,window.View=View,window.Dialog=Dialog,window.Handler=Handler,window.Loader=Loader,window.Byte=Byte,window.Texture=Texture,window.Matrix=Matrix,window.Graphics=Graphics,window.Dictionary=Dictionary,window.Point=Point,window.Animation=Animation,window.Tween=Tween,window.Ease=Ease,window.SoundManager=SoundManager,window.LayaEvent=LayaEvent,window.LayaNode=LayaNode,window.LocalStorage=LocalStorage,window.EventDispatcher=EventDispatcher,window.HTMLDivElements=HTMLDivElements,window.Images=Images,window.HTMLImage=HTMLImage,window.Texts=Texts,window.UIUtils=UIUtils,window.WorkerLoader=WorkerLoader,window.Rectangle=Rectangle,View.regComp=View.regComponent;var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])};return function(e,i){function n(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var i,n,o,t;function a(){return o.call(this)||this}i=e.appEnter||(e.appEnter={}),n=i.ui||(i.ui={}),o=Laya.View,__extends(a,o),a.prototype.createChildren=function(){o.prototype.createChildren.call(this),this.createView(e.appEnter.ui.LoadBarUI.uiView)},a.uiView={type:"View",props:{width:640,height:1136,centerX:0},child:[{type:"Label",props:{y:713,x:172,width:174,var:"lblIf",text:"如无法进入App请",height:24,fontSize:18,font:"SimHei",color:"#343841",align:"right"}},{type:"Label",props:{y:713,x:355,width:71,var:"txtRefresh",underline:!0,text:"点击刷新",height:23,fontSize:18,font:"SimHei",color:"#009a00"}},{type:"Label",props:{y:690,x:75,width:521,var:"lblWait",text:"首次加载时间较长，请耐心等待...",height:18,fontSize:18,font:"SimHei",color:"#343841",align:"center"}},{type:"Label",props:{y:980,x:10,width:619,var:"txtTip",leading:5,height:73,fontSize:18,font:"SimHei",color:"#343841",align:"center"}}]},t=a,n.LoadBarUI=t}(modules=modules||{}),function(e){var i,n,o,t;function a(){return o.call(this)||this}i=e.appEnter||(e.appEnter={}),n=i.ui||(i.ui={}),o=Laya.View,__extends(a,o),a.prototype.createChildren=function(){o.prototype.createChildren.call(this),this.createView(e.appEnter.ui.LoginPageUI.uiView)},a.uiView={type:"View",props:{width:640,height:1136,centerX:0},child:[{type:"Label",props:{x:32,width:578,var:"lbltip",text:"健康游戏忠告\\n抑制不良游戏，拒绝盗版游戏，注意自我保护，谨防受骗上当\\n适度游戏益脑，沉迷游戏伤身，合理安排时间，享受健康生活",styleSkin:"login/label.png",leading:8,height:78,fontSize:16,font:"SimHei",color:"#343841",bottom:45,align:"center"}},{type:"Label",props:{y:1066,width:450,var:"lblVersion",text:"三七",leading:7,height:66,fontSize:14,font:"SimHei",color:"#343841",centerX:0,align:"center"}},{type:"TextInput",props:{y:717,x:179,width:290,visible:!1,var:"txtaccount",height:32,borderColor:"#787474",bgColor:"#f8f6f6"}},{type:"Button",props:{y:549,var:"btnEnter",stateNum:1,skin:"login/enterGame.png",centerX:-2}},{type:"Image",props:{y:226,skin:"login/logo.png",centerX:12}}]},t=a,n.LoginPageUI=t}(modules=modules||{}),function(e){var i,n;function o(){}i=e.version||(e.version={}),o.conversionUrl=function(e){return e},o.storageUrl=function(e){if(!o.useVersionControl)return e.replace(xgreg,"$")+"?"+loginVersion;if(o.cacheVerDict[e])return e.replace(xgreg,"$")+"?"+o.cacheVerDict[e];if(o.fileVerDict[e])return e.replace(xgreg,"$")+"?"+o.fileVerDict[e];var i=e.substring(0,e.lastIndexOf("/")+1);return o.pathVerDict[i]?e.replace(xgreg,"$")+"?"+o.pathVerDict[i]:e.replace(xgreg,"$")+(0<=e.indexOf("?")?"":"?"+o.v)},o.getVNum=function(e){if(!o.useVersionControl)return loginVersion;if(o.cacheVerDict[e])return o.cacheVerDict[e];if(o.fileVerDict[e])return o.fileVerDict[e];var i=e.substring(0,e.lastIndexOf("/")+1);return o.pathVerDict[i]?o.pathVerDict[i]:o.v},o.getFullVNum=function(e){var i=e.substring(o.rootLen);return o.getVNum(i)},Object.defineProperty(o,"systemVersion",{get:function(){if(o._dateVersion)return o._dateVersion;var e=new Date;return o._dateVersion=e.getFullYear()+""+(e.getMonth()+1)+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()},enumerable:!0,configurable:!0}),o.setRootUrl=function(e){return o.ROOT_URL=e,o.rootLen=e.length,e},o.ROOT_URL="",o.rootLen=0,o.loginVersion="1",o.v="",o.mainList=["main1.js"],o.cacheVerDict={},o.fileVerDict={},o.pathVerDict={},o.wxlocaldir="/layaairGame",o.useVersionControl=!1,n=o,i.MainVersion=n}(modules=modules||{});__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])};return function(e,i){function n(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var i,n,o;function t(e){void 0===e&&(e=!1);var i=n.call(this)||this;return i.isLoaded=!1,i.effLoaded=!1,i.autoPlay=!1,i.frameGap=1,i._speed=1,i.bmpds=[],i.bIndx=0,i}i=e.appEnter||(e.appEnter={}),__extends(t,n=Box),Object.defineProperty(t.prototype,"speed",{set:function(e){var i=this._speed;if(e<1){var n=1/e;Number(n.toFixed(0))==n?(this._speed=1,this.frameGap=n):(this._speed=e,this.frameGap=1)}else this._speed=e,this.frameGap=1;0<this.bmpds.length&&0!=e&&i/e<0&&this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flowerUrl",{set:function(e){0<=(this._flowerUrl=e).indexOf(".json")?(this.flower||(this.flower=new Animation,this.flower.interval=150,this.flower.autoPlay=!0,this.addChild(this.flower)),this.flower.loadAtlas(e,Handler.create(this,this.onEffLoaded)),this.eff=this.flower):(this.tree||(this.tree=new Images,this.tree.on(LayaEvent.LOADED,this,this.onEffLoaded),this.tree.skin=e,this.addChild(this.tree)),this.eff=this.tree)},enumerable:!0,configurable:!0}),t.prototype.onEffLoaded=function(){if(this.effLoaded=!0,this.isLoaded)if(this.eff.visible=!0,this.eff instanceof Animation){var e=this.flower.frames[0].cmds[0];this.flower.x=this.width-(e[1]+e[3]),this.flower.y=Math.min(Laya.stage.height,this.height)-(e[2]+e[4])}else this.tree.pivotX=158,this.tree.pivotY=256,this.tree.x=412,this.tree.y=1148,this.onTreeyao1();else this.eff.visible=!1},t.prototype.onTreeyao1=function(){this.tree&&Laya.Tween.to(this.tree,{rotation:-3},1100,Laya.Ease.linearInOut,Handler.create(this,this.onTreeyao2),100,!0)},t.prototype.onTreeyao2=function(){this.tree&&Laya.Tween.to(this.tree,{rotation:3},1100,Laya.Ease.linearOut,Handler.create(this,this.onTreeyao1),100,!0)},Object.defineProperty(t.prototype,"bgUrls",{get:function(){return this._urls},set:function(e){this._urls=e,Laya.loader.load(e,Handler.create(this,this.onLoadComplete),null,Loader.IMAGE)},enumerable:!0,configurable:!0}),t.prototype.resetSize=function(e,i){this.autoPlay&&(this.width=e,this.height=i,this.effLoaded&&this.onEffLoaded())},t.prototype.draw=function(){var e,i=this._urls,n=0;if(this.graphics.clear(),1<i.length)for(var o=0,t=i.length;o<t;o++)e=Laya.loader.getRes(i[o]),this.graphics.drawTexture(e,n,0,e.width,e.height),n+=e.width,this.bmpds.push(e);else{var a=Laya.loader.getRes(i[0]);if(this.autoPlay)if(0<this.bmpds.length)for(o=0;o<3;o++)e=this.bmpds[o],this.graphics.drawTexture(e,n,0,e.width,e.height),n+=e.width,this.bmpds.push(e);else{var r=Math.floor(a.width/3),s=a.height;for(o=0;o<3;o++)e=o<2?Texture.createFromTexture(a,r*o,0,r,s):Texture.createFromTexture(a,2*r,0,a.width-2*r,s),this.graphics.drawTexture(e,n,0,e.width,e.height),n+=e.width,this.bmpds.push(e)}else this.graphics.drawTexture(a,0,0,a.width,a.height),this.width=a.width,this.height=a.height}this.bIndx=this._speed<0?this.bmpds.length-1:0},t.prototype.onLoadComplete=function(){this.logoImg&&(this.logoImg.visible=!0),this.bmpds.length=0,this.draw(),this.isLoaded=!0,Laya.Browser.window.removeBg(),this.effLoaded&&this.onEffLoaded(),this.autoPlay&&this.startScroll(),this.event(LayaEvent.LOADED)},t.prototype.startScroll=function(){this.isLoaded&&(Laya.timer.frameLoop(this.frameGap,this,this.onFrame),this.onTreeyao1())},t.prototype.onFrame=function(){var e,i,n=this.graphics.cmds,o=this._speed;if(o<0){var t=void 0;(e=n[0])[1]+e[3]<0&&(n.shift(),i=n.length,e[1]=n[i-1][1]+n[i-1][3],n.push(e),++this.bIndx>=this.bmpds.length&&(this.bIndx=0),t=this.bmpds[this.bIndx],e[0]=t,e[3]=t.width,e[4]=t.height);var a=n[(i=n.length)-1][1]+n[i-1][3];a<=this.width&&(++this.bIndx>=this.bmpds.length&&(this.bIndx=0),t=this.bmpds[this.bIndx],this.graphics.drawTexture(t,a,0,t.width,t.height))}else{t=void 0,(e=n[n.length-1])[1]>this.width&&(n.pop(),e[1]=n[0][1]-e[3],n.unshift(e),--this.bIndx<0&&(this.bIndx=this.bmpds.length-1),t=this.bmpds[this.bIndx],e[0]=t,e[3]=t.width,e[4]=t.height);var r=n[0][1];0<r&&(--this.bIndx<0&&(this.bIndx=this.bmpds.length-1),t=this.bmpds[this.bIndx],this.graphics.drawTexture(t,r-t.width,0,t.width,t.height),e=n.pop(),n.unshift(e))}i=n.length;for(var s=0;s<i;s++)e=n[s],0==s?e[1]+=o:e[1]=n[s-1][1]+n[s-1][3]},t.prototype.stopScroll=function(){Laya.timer.clear(this,this.onFrame),this.tree&&Laya.Tween.clearTween(this.tree)},t.prototype.dispose=function(){this.stopScroll(),this.flower&&(this.flower.stop(),this.flower.destroy(!0)),this.tree&&Laya.Tween.clearAll(this.tree),this.logoImg&&(this.logoImg.skin&&Laya.loader.clearRes(cdn+this.logoImg.skin),this.logoImg.destroy(!0)),this.graphics.clear(),Laya.loader.clearRes(cdn+this._flowerUrl);for(var e=this._urls.length-1;0<=e;e--)Laya.loader.clearRes(cdn+this._urls[e])},o=t,i.ScrollPicture=o,window.ScrollPicture=o}(modules=modules||{});var ScrollPicture=modules.appEnter.ScrollPicture;__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])};return function(e,i){function n(){this.constructor=e}o(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var i,n,o;function t(){var e=n.call(this)||this;return onWXMini||onBDMini?(e.txtRefresh.text="清缓存后重连",e.txtRefresh.on(LayaEvent.CLICK,e,e.onClearCache)):e.txtRefresh.on(LayaEvent.CLICK,e,e.onRefresh),e.centerX=0,e.bottom=0,e}i=e.appEnter||(e.appEnter={}),n=i.ui.LoadBarUI,__extends(t,n),t.prototype.onClearCache=function(){if(wxswan){try{wxswan.clearStorageSync()}catch(e){console.log(e)}try{wxswan.canIUse&&wxswan.canIUse("FileSystemManager.rmdir.object.recursive")?(wxswan.getFileSystemManager.rmdir({dirPath:MiniFileMgr.fileNativeDir,recursive:!0}),console.log("已经清理缓存")):(MiniFileMgr.deleteAll(),MiniFileMgr.tmpListObj&&MiniFileMgr.fs.unlink({filePath:MiniFileMgr.getFileNativePath(MiniFileMgr.tmpListName)}))}catch(e){console.log(e)}gameLogin.couldLogin=!1,wxswan.showModal({title:"提 示",content:"缓存清理成功，请重新进入小游戏",showCancel:!1,success:function(e){e.confirm&&wxswan.exitMiniProgram&&wxswan.exitMiniProgram({})}})}},t.prototype.onRefresh=function(){Laya.Browser.window.location.reload(!0)},t.prototype.show=function(){this.visible=!0,this.mainBg&&(this.mainBg.visible=!0,this.mainBg.alpha=1),Laya.stage.addChild(this)},t.prototype.hide=function(e){void 0===e&&(e=!0),e?Laya.timer.once(200,this,this.onDispose):(this.mainBg&&(this.mainBg.visible=!1),this.visible=!1)},t.prototype.onDispose=function(){this.removeSelf(),this.mainBg&&(this.mainBg.dispose(),this.mainBg.removeSelf()),Laya.loader.clearRes(cdn+"login/login.json")},o=t,i.LoadBar=o}(modules=modules||{});var modules,LoadBar=modules.appEnter.LoadBar;!function(e){var t,i;function n(){}t=e.version||(e.version={}),n.getInstance=function(){return null==n.instance&&(n.instance=new n),n.instance},n.prototype.init=function(e){if(e){var i=void 0;try{this.verTxt=e,this.verTxt&&(i=JSON.parse(this.verTxt))}catch(e){i=null,console.log("版本号文件解析出错:"+e)}if(i){var n=[];t.MainVersion.v=i.v+"",t.MainVersion.fileVerDict=i.files,t.MainVersion.pathVerDict=i.paths,i.mainList&&(t.MainVersion.mainList=i.mainList);for(var o=n.length-1;0<=o;o--)i.files[n[o]]&&(i.files[n[o]]+="_"+loginVersion),i.cache&&i.cache[n[o]]&&(i.cache[n[o]]+="_"+loginVersion);i.cache&&(t.MainVersion.cacheVerDict=i.cache)}else showAlert("版本号文件解析出错")}else showAlert("版本文件加载出错")},i=n,t.VersionConfig=i}(modules=modules||{});var codeid,userInfo,miniLaunchOptions,miniShowOptions,useTmpSaveImg,isHW2B,userName,serverip,port,nickName,time,sign,loadingBar,MiniFileMgr,MiniAdpter,illegalStrList,wxSystemInfo,gameLogin,gameMainClazz,VersionConfig=window.VersionConfig=modules.version.VersionConfig,isDevelop=!1,isWXTrial=!1,minLoad=window.minLoad=function(e,i,n,o,t){var a=this;if(0===(a._url=e).indexOf("data:image")?a._type=i="image":a._type=i=i||a.getTypeFromUrl(e),a._cache=n,a._data=null,!t&&Loader.loadedMap[laya.net.URL.formatURL(e)])return a._data=Loader.loadedMap[laya.net.URL.formatURL(e)],a.event("progress",1),void a.event("complete",a._data);if(null!=Loader.parserMap[i])return a._customParse=!0,void(Loader.parserMap[i]instanceof laya.utils.Handler?Loader.parserMap[i].runWith(a):Loader.parserMap[i].call(null,a));var r=MiniAdpter.getUrlEncode(e,i);if("image"===i)MiniAdpter.EnvConfig.load.call(a,e,i,n,o,t);else{var s=window.storageDic,l=e.replace(xgreg,"$");if("atlas"==i&&s[l]){function d(){a._http||(a._http=new laya.net.HttpRequest,a._http.on("progress",a,a.onProgress),a._http.on("error",a,a.onError),a._http.on("complete",a,a.onLoaded)),a._http.send(e,null,"get","json")}var g=l+"?"+s[l];s[l]==MainVersion.getVNum(e)?wxswan.getStorage({key:g,success:function(e){a.onLoaded(e.data)},fail:function(){wxswan.removeStorage({key:g}),delete s[l],d()}}):(wxswan.removeStorage({key:g}),delete s[l],d())}else{if(MiniFileMgr.isLocalNativeFile(e))return void MiniFileMgr.read(e,r,new Handler(window,window.onReadNativeCallBack,[r,e,i,n,o,t,a]));var c=e;if(e=laya.net.URL.formatURL(e),MiniFileMgr.getFileInfo(e)){var w=MiniFileMgr.getFileInfo(e),h=a._url.replace(".json",".png");w.v==MainVersion.getVNum(h)?(isDevelop&&console.log("本地加载："+h),w.encoding=w.encoding?w.encoding:"ascii",MiniFileMgr.read(w.md5,w.encoding,new Handler(window,window.onReadNativeCallBack,[w.encoding,e,i,n,o,t,a]),e)):(isDevelop&&console.log("重置本地："+h),MiniAdpter.remove(e),-1!=e.indexOf("http://")||-1!=e.indexOf("https://")?MiniAdpter.EnvConfig.load.call(a,c,i,n,o,t):MiniFileMgr.readFile(e,r,new Handler(window,window.onReadNativeCallBack,[r,e,i,n,o,t,a]),e))}else-1!=e.indexOf("http://")||-1!=e.indexOf("https://")?MiniAdpter.EnvConfig.load.call(a,c,i,n,o,t):MiniFileMgr.readFile(e,r,new Handler(window,window.onReadNativeCallBack,[r,e,i,n,o,t,a]),e)}}},onReadNativeCallBack=window.onReadNativeCallBack=function(e,i,n,o,t,a,r,s,l){if(void 0===o&&(o=!0),void 0===t&&(t=void 0),void 0===a&&(a=!1),void 0===r&&(r=void 0),void 0===s&&(s=0),void 0===l&&(l=void 0),s)1==s&&MiniAdpter.EnvConfig.load.call(r,i,n,o,t,a);else{var d;if("json"==n||"atlas"==n)try{d=MiniAdpter.getJson(l.data)}catch(e){console.log("json格式错误："+l.data),MiniAdpter.EnvConfig.load.call(r,i,n,o,t,a)}else if("xml"==n)try{d=laya.utils.Utils.parseXMLFromString(l.data)}catch(e){console.log("xml格式错误："+l.data),MiniAdpter.EnvConfig.load.call(r,i,n,o,t,a)}else d=l.data;r.onLoaded(d)}},minImageLoad=window.minImageLoad=function(e){if(MiniFileMgr.isLocalNativeFile(e)){if(-1!=e.indexOf("http://")||-1!=e.indexOf("https://"))if(""!=MiniFileMgr.loadPath)e=e.split(MiniFileMgr.loadPath)[1];else{var i=""!=laya.net.URL.rootPath?laya.net.URL.rootPath:laya.net.URL.basePath;""!=i&&(e=e.split(i)[1])}}else e=laya.net.URL.formatURL(e);MiniFileMgr.getFileInfo(e)?onCreateImage(e,this,!0):onCreateImage(e,this,!1)},onCreateImage=window.onCreateImage=function(i,n,e,o){var t,a;if(void 0===e&&(e=!1),void 0===o&&(o=""),e)if(""!=o)t=o;else{var r=MiniFileMgr.getFileInfo(i),s=n._url.replace(".json",".png");r.v==MainVersion.getVNum(s)?(t=MiniFileMgr.getFileNativePath(r.md5),isDevelop&&console.log("本地加载："+s)):(isDevelop&&console.log("重置本地："+s),MiniAdpter.remove(i),t=i)}else t=i;function l(){a.onload=null,a.onerror=null,delete n.imgCache[i]}null==n.imgCache&&(n.imgCache={});function d(){l(),n._url=laya.net.URL.formatURL(n._url),n.onLoaded(a)}function g(){l(),n.event("error","Load image failed")}"nativeimage"==n._type?((a=new Laya.Browser.window.Image).crossOrigin="",a.onload=d,a.onerror=g,a.src=MainVersion.conversionUrl(t),n.imgCache[i]=a):HTMLImage.create(t,{onload:d,onerror:g,onCreate:function(e){a=e,n.imgCache[i]=e}})},xxaddReTry=window.xxaddReTry=function(e){var i=this;if(e.imgError){var n=e.url.replace(".json",".png");0<=n.indexOf(MainVersion.ROOT_URL)&&(n=n.substring(MainVersion.rootLen));var o=MainVersion.conversionUrl(n);o=o.split("?")[0],MiniAdpter.getFileInfo(o)?(MiniAdpter.remove(o),Laya.timer.once(15,null,t)):t()}else t();function t(){i._resInfos[i._maxPriority-1].push(e),i._next()}},loadSinglePackage=function(i,n,e){void 0===e&&(e=0);var o={name:i,errNum:e,success:function(e){n&&n()},fail:function(e){o.errNum<0?(o.errNum=1,loadSinglePackage(i,n,1)):(console.log(e.errMsg),showAlert("请升级您的微信版本"))}};window.wx.loadSubpackage(o)},loadPackListAsync=function(e,i){var n=0,o=function(){loadSinglePackage(e[n],function(){++n>=e.length?i&&i():o()})};o()},loadPackListSync=function(e,i){function n(){++o>=e.length&&i&&i()}for(var o=0,t=e.length-1;0<=t;t--)loadSinglePackage(e[t],n)},initWXLogin=function(){if(Laya.MiniAdpter.init(),"getUpdateManager"in window.wx){var i=window.wx.getUpdateManager();i.onCheckForUpdate(function(e){console.log("20190409:"+e.hasUpdate)}),i.onUpdateReady(function(){window.wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(e){e.confirm&&i.applyUpdate()}})}),i.onUpdateFailed(function(){})}Laya.MiniAdpter.autoCacheFile=!1,Loader.prototype.load=minLoad,Loader.prototype._loadImage=minImageLoad,Laya.LoaderManager.prototype._addReTry=xxaddReTry;try{var e=window.wx.getSystemInfoSync();if(onXXIOS="android"!=e.platform&&("ios"==e.platform||(isDevelop=window.isDevelop=!0,0<=e.system.toLowerCase().indexOf("ios"))),isDevelop&&console.log("=系统信息=:"+JSON.stringify(e)),window.wx.getLaunchOptionsSync){var n=window.wx.getLaunchOptionsSync();console.log("=启动参数=:"+JSON.stringify(n)),miniLaunchOptions=window.miniLaunchOptions=n}window.wx.onShow&&window.wx.onShow(function(e){miniShowOptions=window.miniShowOptions=e,console.log("=重新进入=:"+JSON.stringify(e))})}catch(e){console.log(e)}if(window.__wxConfig){var o=window.__wxConfig.envVersion+"";"undefined"!=o&&"develop"!=o&&"trial"!=o||(isWXTrial=window.isWXTrial=!0)}window.wx.login({success:loginSuccess,fail:loginFail})},initWXGameMain=function(){if(window.wx.loadSubpackage)loadPackListSync(["GameMain1"],function(){for(var e=Laya.Browser.window,i=0,n=xxInitfuncs.length,o=0;o<n&&xxInitfuncs[o]in e;o++)i++;if(i==n)for(o=0;o<n;o++)e[xxInitfuncs[o]](e);gameMainClazz=e.xxGameMain,laya2Inited=!0,!e.gameMain&&gameMainClazz&&laya2Inited&&gameLogin.couldLogin?gameMain=e.gameMain=new gameMainClazz:gameMainClazz||console.log("不存在class GameMain")});else try{require("js1/game.js");for(var e=Laya.Browser.window,i=0,n=xxInitfuncs.length,o=0;o<n&&xxInitfuncs[o]in e;o++)i++;if(i==n)for(o=0;o<n;o++)e[xxInitfuncs[o]](e);gameMainClazz=e.xxGameMain,laya2Inited=!0,!e.gameMain&&gameMainClazz&&laya2Inited&&gameLogin.couldLogin?gameMain=e.gameMain=new gameMainClazz:gameMainClazz||console.log("不存在class GameMain")}catch(e){if(console.log(e.stack),window.wxSystemInfo){var t=window.wxSystemInfo.version;if(t){var a=Number(t.substr(0,3)),r=Number(t.substr(2,3));a<=6.6&&r<6.7&&showAlert("您的微信版本过低，请登录正式版游戏或升级您的微信")}}else showAlert("请登录正式版游戏或升级您的微信版本")}},loginDefault=function(e){var i={platCode:9,gameid:"1",account:e.code,time:"4948946",platform:"wxMiniApp",cdn:"",loginAdd:"http://192.168.1.3/",debug:0,isEgret:!0,createPage:0,srole:0,worker:0,hideCharge:0,version:12349};convertParam(i),window.h5vars=i;try{loginReport(i)}catch(e){console.log(e)}initGameLogin()},loginSuccess=window.loginSuccess=function(e){codeid=window.codeid=e.code,loginDefault(e)},loginFail=window.loginFail=function(){window.wx.showModal({title:"提 示",content:"获取登录凭证失败",showCancel:!0,cancelText:"继续体验",confirmText:"退出游戏",success:loginDefault})},getWXLoginVars=window.getWXLoginVars=function(i){var e;try{e=JSON.parse(i)}catch(e){return void window.wx.showModal({title:"提 示",content:e+"|"+i,showCancel:!0,cancelText:"继续体验",confirmText:"退出游戏",success:loginDefault})}var n={};n.account=e.username,n.platCode=e.platid,n.gameid=e.gameid,n.appid=e.appid,n.platform=e.platform,n.token=e.sign,n.cdn=e.cdn,n.loginAdd=e.webSite,n.hideCharge=e.hideCharge,n.hideFuncs=e.hide,n.logoType=e.logoType,n.logoUrl=e.logoUrl,n.payUrl=e.payUrl,n.sl="wss",n.time=e.time,n.debug=e.isDebug,n.version=e.version,n.ext=e.sData,n.worker=0,n.reportSign=e.reportSign,n.isEgret=!0,convertParam(n),window.h5vars=n;try{loginReport(n)}catch(e){console.log(e)}initGameLogin(),writeLog(1),console.log("获取登录vars："+JSON.stringify(e))},loginReport=function(e){"getSetting"in window.wx&&window.wx.getSetting({success:function(e){if(e.authSetting["scope.userInfo"])window.reportUserInfo();else if(console.warn("authorize fail"+e),"createUserInfoButton"in window.wx){var i=window.wx.createUserInfoButton({type:"image",image:"login/alpha.png",style:{left:0,top:0,width:window.screenW,height:window.screenH}});i.onTap(function(e){i.hide(),i.destroy(),window.wx.authorize({scope:"scope.userInfo",success:function(){window.reportUserInfo()},fail:function(){window.reportUserInfo()}})})}},fail:function(e){console.warn("getSetting接口调用失败"+e),window.reportUserInfo()}})},reportUserInfo=window.reportUserInfo=function(e){"getUserInfo"in window.wx&&window.wx.getUserInfo({withCredentials:!1,lang:"zh_CN",success:function(e){userInfo=window.userInfo=e.userInfo,console.log(userInfo.nickName,userInfo.avatarUrl),window.gameLogin&&window.gameLogin.onStartGame()},fail:function(){userInfo=window.userInfo={nickName:"游客",avatarUrl:"res/item/1001.png"},window.gameLogin&&window.gameLogin.onStartGame()}})},serverApi="request/",isIOS=!1,isIphoneX=!1,isQQZone=!1,loginErrCount=0,appTop=0,appBottom=0,cutTop=44,cutBottom=34,cutHeight=78,MainVersion=window.MainVersion=modules.version.MainVersion,wxswan=window.wxswan=onWXMini?window.wx:onBDMini?window.swan:null,illegalCharReg=window.illegalCharReg=/[^\u4e00-\u9fa5a-zA-Z\d]+/,GameLogin=function(){function g(){this.couldLogin=!1,this.loadingMain=!1,this.scaleRatio=1,this.loginResLoaded=!1,this.importedToLogin=!1,this.workerjsPath="js/worker.js",checkIsIOS(),checkIsQQZone(),isHW2B=window.isHW2B=2<screenH/screenW,appTop=window.appTop=0,appBottom=window.appBottom=isQQZone?20:0,cutTop=window.cutTop=44,cutBottom=window.cutBottom=34,cutHeight=window.cutHeight=78,(onWXMini||onBDMini)&&(MiniFileMgr=onWXMini?(MiniAdpter=window.MiniAdpter=Laya.MiniAdpter,window.MiniFileMgr=laya.wx.mini.MiniFileMgr):(MiniAdpter=window.MiniAdpter=Laya.BMiniAdapter,window.MiniFileMgr=laya.bd.mini.MiniFileMgr));var e=1,i=Laya.Browser.clientHeight,n=Laya.Browser.clientWidth,o=isHW2B&&i==screenH,t=window.h5vars.designHeight,a=window.h5vars.designWidth,r=t/a,s=i/n;if(window.h5vars.isFullScreen)r<s?e=a/Laya.Browser.clientWidth:s<r&&(e=t/Laya.Browser.clientHeight),Laya.init(a,t,Laya.WebGL),Laya.stage.bgColor="#ffffff",Laya.stage.alignV=Laya.Stage.ALIGN_TOP,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_AUTO;else{if(r<s)t=Math.ceil(s*a),e=a/n;else if(s<r){var l=i*a/t,d=n<a?n:a;a=Math.ceil(a*d/l),e=t/i}Laya.init(a,t,Laya.WebGL),Laya.stage.alignV=Laya.Stage.ALIGN_TOP,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL}o&&(window.appTop=e*cutTop),window.illegalChars=["　"," ","□","囗","\n",",",".","，","。",";","；","*","&","^","%","$","#","@","!","~","`","[","]","<",">","(",")",":","","|"],Laya.stage.scaleMode==Laya.Stage.SCALE_SHOWALL?window.onresize=resizePhone:Laya.stage.scaleMode==Laya.Stage.SCALE_FIXED_AUTO&&Laya.stage.on(LayaEvent.RESIZE,window,window.resizePhone),g.orientationParent=Laya.stage,Laya.Browser.onMobile&&"onorientationchange"in window&&(g.onHengshuping(),window.addEventListener("orientationchange",g.onHengshuping,!1)),Laya.URL.basePath?window.cdn=MainVersion.setRootUrl(Laya.URL.basePath):Laya.URL.rootPath=Laya.URL.basePath=MainVersion.setRootUrl(window.cdn),this.loginBg=new ScrollPicture(!0),Laya.Browser.onMobile?(this.loginBg.centerX=0,this.loginBg.width=Laya.stage.width,this.loginBg.height=Laya.stage.height):(this.loginBg.centerX=0,this.loginBg.autoPlay=!1),this.loginBg.centerY=0,this.loginBg.mouseEnabled=!0,this.loginBg.flowerUrl="login/movie.png",Laya.stage.addChild(this.loginBg),window.writeLog(2),this.requestLoginInfo(),Laya.ResourceVersion.type=Laya.ResourceVersion.FILENAME_VERSION,Laya.ResourceVersion.enable("version.json",Handler.create(this,this.beginLoad))}return g.prototype.beginLoad=function(){this.loginBg.bgUrls=["login/bg.jpg"];var e=[];e.push({url:"login/login.json",type:Laya.Loader.ATLAS}),Laya.loader.load(e,Laya.Handler.create(this,this.onLoginResLoaded))},g.prototype.requestLoginInfo=function(){this.importServerBack("{}")},g.prototype.importServerBack=function(e){var i;try{i=JSON.parse(e)}catch(e){if(i=null,++loginErrCount<3)this.requestLoginInfo();else{var n="[importServer.php请求上次登录信息返回出错]";showAlert(n),console.log(n+" "+e.message)}return}i&&(this.selectedServerData=i,this.importedToLogin=!0,this.onCreateLoginPage())},g.prototype.onLoginResLoaded=function(){this.loginResLoaded=!0,(loadingBar=window.loadingBar=new LoadBar).mainBg=this.loginBg,loadingBar.visible=!1,Laya.stage.addChild(loadingBar),this.onCreateLoginPage(),onStageResize(),(onWXMini||onBDMini)&&MiniAdpter.getFileList(),debugMode<=1&&!isEgret&&loadSingleScript(cdn+"libs/GameCore2.min.js?v="+loginVersion,function(){laya2Inited=!0,debugMode<=1?gameLogin.onVersionLoaded():newGameMain()})},g.prototype.onCreateLoginPage=function(){var e=this;e.loginResLoaded&&e.importedToLogin&&(e.loginPage=new modules.appEnter.ui.LoginPageUI,Laya.stage.addChild(e.loginPage),e.couldLogin=!0,e.onLoadGameMain(),onStageResize())},g.prototype.resizeView=function(e){void 0===e&&(e=1),this.loginBg&&this.loginBg.resetSize(Laya.stage.width,Laya.stage.height)},g.prototype.onStartGame=function(){var e=this;window.wx&&!window.userInfo||(2500<Date.now()-window.enterGameTime?window.gameInitComplete?(window.gameMain.updateWXUserInfo(),loadingBar.hide(),e.loginPage.parent&&e.loginPage.parent.removeChild(e.loginPage),e.loginBg.stopScroll(),Laya.timer.clear(e,e.onStartGame),Laya.Tween.to(e.loginBg,{alpha:0},1200,Ease.linearNone,Handler.create(e,e.onHideLoginBg))):e.onShowLoading():(Laya.timer.loop(300,e,e.onStartGame),e.onShowLoading()));window.writeLog(12)},g.prototype.onHideLoginBg=function(){this.loginBg.visible=!1,this.loginBg.stopScroll(),this.loginPage.parent&&this.loginPage.parent.removeChild(this.loginPage),this.loginBg.parent&&this.loginBg.parent.removeChild(this.loginBg),this.loginBg.dispose(),Laya.loader.clearRes("login/login.json")},g.prototype.onAllCreateLoaded=function(){var e=Laya.Browser.window;this.loadingMain||(this.loadingMain=!0,1<e.debugMode?isEgret||e.initDebugGameMain():Laya.loader.load([{url:"version.json",type:Laya.Loader.TEXT}],Laya.Handler.create(this,this.onVersionLoaded)))},g.prototype.onLoadGameMain=function(){if(this.couldLogin){var e=Laya.Browser.window;if(!this.loadingMain)if(1<e.debugMode)if(isEgret){var i=window.GameMain;!window.gameMain&&i&&(window.gameMain=new i)}else e.initDebugGameMain();else Laya.ResourceVersion.manifest?this.onStartMain():Laya.loader.load([{url:"version.json",type:Laya.Loader.TEXT}],Laya.Handler.create(this,this.onVersionLoaded));this.loadingMain=!0,gameMainClazz&&(onWXMini||onBDMini?gameMain=window.gameMain=new gameMainClazz:newGameMain())}},g.prototype.onHasWorkerJs=function(){Laya.WorkerLoader.enable||(console.log("-------------- worker can work ---------------"),Laya.WorkerLoader.workerPath=this.workerjsPath,Laya.WorkerLoader.enable=!0)},g.prototype.onVersionLoaded=function(){var e=Laya.loader.getRes("version.json");laya2Inited||isEgret?(!e&&this.versionData&&(e=this.versionData),e&&(VersionConfig.getInstance().init(e),MainVersion.useVersionControl=!0,this.onStartMain())):this.versionData=e},g.prototype.onStartMain=function(){isEgret&&!onWXMini&&!onBDMini||Laya.Browser.window.initReleaseGameMain(),isCreate&&window.writeLog(14)},g.prototype.onShowLoading=function(){loadingBar.show(),Laya.Browser.window.removeBg()},g.prototype.getShareObj=function(){Laya.Browser.window;if(!g.shareList){var e=g.shareList=[],i={8001:"这款游戏，家长绝对不会阻止孩子玩",8002:"这款游戏，家长绝对不会阻止孩子玩"};for(var n in i)e.push({title:i[n],imageUrl:window.h5vars.cdn+"login/weChatShare/"+n+".jpg"})}var o=g.shareList[Math.floor(g.shareList.length*Math.random())];return o.query?o.query+="&sharerAccount="+window.openid:o.query="sharerAccount="+window.openid,console.log("=====分享参数："+o.query),o},g.prototype.addQQzoneBottomTip=function(){this.qqZoneTip||(window.qqZoneTip=this.qqZoneTip=new Label,this.qqZoneTip.height=appBottom+2,this.qqZoneTip.align="center",this.qqZoneTip.valign="middle",this.qqZoneTip.bgColor="#343841",this.qqZoneTip.font="SimHei",this.qqZoneTip.color="#ffffff",this.qqZoneTip.fontSize=16,this.qqZoneTip.bottom=0,this.qqZoneTip.text="您的OPENID："+window.h5vars.account+"，若您在游戏中遇到问题，请联系官方客服QQ：3088572415，《诛仙御神》应用由《深圳薪传网络科技有限公司》提供",g.orientationParent.addChild(this.qqZoneTip)),this.qqZoneTip.centerX=0,this.qqZoneTip.width=g.orientationParent.width},g.onHengshuping=function(){var e=g.orientationBox;if(180==window.orientation||0==window.orientation)console.log("竖屏状态！"),e&&e.parent&&e.parent.removeChild(e);else if(90==window.orientation||-90==window.orientation){if(console.log("横屏状态！"),!e){(e=new Box).on(LayaEvent.RESIZE,g,g.onResizeOrientationBox),e.left=0,e.top=0,e.right=0,e.bottom=0;var i=new Label;i.font="SimHei",i.fontSize=60,i.color="#ffffff",i.centerX=0,i.centerY=0,i.text="保持竖屏会有更好的游戏体验",e.addChild(i),g.orientationBox=e}e.zOrder=1900,g.orientationParent.addChild(e)}},g.onResizeOrientationBox=function(){var e=g.orientationBox;e&&(e.graphics.clear(),e.graphics.drawRect(0,0,e.width,e.height,"#000000","#000000",1))},g}(),setShareData=window.setShareData=function(){wxswan&&(wxswan.showShareMenu&&wxswan.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wxswan.onShareAppMessage&&wxswan.onShareAppMessage(function(e){return window.xxShareCallBack&&Laya.timer.once(2500,window,window.xxShareCallBack),GameLogin.prototype.getShareObj()}))},onUpdateProgress=window.onUpdateProgress=function(e,i){},resizePhone=window.resizePhone=function(){window.onMainStageResize?window.onMainStageResize():window.onStageResize&&window.onStageResize(),gameLogin&&isQQZone&&gameLogin.addQQzoneBottomTip()},onStageResize=window.onStageResize=function(){if(Laya.stage.scaleMode==Laya.Stage.SCALE_SHOWALL){Laya.stage.off(LayaEvent.RESIZE,window,window.resizePhone);isHW2B&&Laya.Browser.clientHeight;var e=window.h5vars.designHeight,i=window.h5vars.designWidth,n=Laya.Browser.height,o=Laya.Browser.width,t=e/i,a=n/o;if(t<a)e=Math.ceil(a*i),0;else if(a<t){var r=n*i/e,s=o<i?o:i;i=Math.ceil(i*s/r),0}Laya.stage.width=i,Laya.stage.height=e}gameLogin&&gameLogin.resizeView()},checkIsIphoneX=window.checkIsIphoneX=function(){return 812==screenH&&375==screenW};function checkIsIOS(){(isIOS=window.isIOS=onXXIOS)&&(isIphoneX=window.isIphoneX=checkIsIphoneX())}function checkIsQQZone(){isQQZone=window.isQQZone=window.h5vars&&"xxqqzone"==window.h5vars.platform}var onXXIOS,gameJSList,debugMode,loginVersion,proInter,layaInited=!1,laya2Inited=!1,isEgret=!1,canInitLogin=!0,useWorker=1,screenW=0,screenH=0,cdn="",loginAdd="",gameCdn="",isCreate=window.isCreate=0,createPage=window.createPage=2,srole=0,enterGameTime=window.enterGameTime=Date.now(),bgType=1,logoType=1,bgUrl="",logoUrl="",xgreg=window.xgreg=/\//g,pper=0,probarWidth=419;function showGameBgImage(e){var i=e.logoUrl,n=e.logoType,o=e.cdn,t=document.createElement("div");t.id="loadBg";var a=t.style;a.position="absolute",a.zIndex="999999",a.width="100%",a.height="100%",a.textAlign="center";var r,s,l,d="",g=window.innerWidth/640;1<g&&(g=1);var c=(l=1<=g?(r=(window.innerWidth-488)*g*.5,s=(window.innerWidth-337.6)*g*.5,.5*window.innerHeight-240):(r=152*g*.5,s=302.4*g*.5,.5*window.innerHeight-240*g))+240;d+='<img id="imgBg" width="'+422*g*.8+'px" style="position:absolute;'+(0==n?"display:none;":"")+"left:"+s+"px;top:"+l*g+'px" src="'+o+(0<=n?"login/logo.png":i)+'?v=1.1">',probarWidth*=g,d+='<img id="probg" height="'+41*g+'" style="position: absolute;left:'+r+"px;top: "+c*g+'px;" src="'+o+'login/probg.png?v=1.1"><img id="probar" width="1" height="'+14*g+'" style="position: absolute;left:'+(r+38*g)+"px;top: "+(c+15)*g+'px;" src="'+o+'login/probar.png?v=1.1">',d+='<div align="center" style="color:#ffffff;position: absolute;left: '+r+"px; top: "+(c+41)*g+"px;width:"+488*g+'px">诸神世界构建中...</div>',t.innerHTML=d,document.body.appendChild(t),proInter=setInterval(progressBgImageBar,50)}function progressBgImageBar(){1<(pper+=.05)&&(pper=0),document.getElementById("probar").width=probarWidth*pper}function clearBar(){0<proInter&&clearInterval(proInter);var e=document.getElementById("probar");e&&(e.width=probarWidth+"")}var loadSingleScript=window.loadSingleScript=function(i,n,e,o){void 0===e&&(e=0),void 0===o&&(o=null);var t=document.createElement("script");t.type="text/javascript",t.errNum=e,t.src=i,t.onload=function(){t.onload=null;var e=t.parentNode;e&&e.removeChild(t),n&&n()},t.onerror=function(){t.onerror=null;var e=t.parentNode;e&&e.removeChild(t),0<t.errNum?o&&o():(t.errNum=1,loadSingleScript(i,n,1))},document.body.appendChild(t)};function initParam(){screenW=window.innerWidth||window.document.body.clientWidth,screenH=window.innerHeight||window.document.body.clientHeight||window.document.documentElement.clientHeight;var e=window.navigator.userAgent;if(onXXIOS=!!e.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),"h5vars"in window){var i=window.h5vars;createVars(i),convertParam(i),i&&0<i.delayTime&&(canInitLogin=!1,setTimeout(function(){canInitLogin=!0,newGameLogin()},i.delayTime)),writeLog(1)}else onWXMini?(isEgret=!0,initWXLogin()):onBDMini&&(isEgret=!0,initBDLogin())}function changeTxtarea(e){30<=e.value.length&&(e.value=e.value.substr(0,30)),e.focus()}var gameMain,createVars=function(e){var i=window.document.location.href.toString();if(i){var n=i.indexOf("?");if(0<n){for(var o,t={},a=(i=i.substr(n+1)).split("&"),r=(a.length,void 0),s=0;s<a.length;s++)0<(n=a[s].indexOf("="))&&(o=a[s].substring(0,n),r=a[s].substr(n+1),"number"==typeof e[o]?t[o]=Number(r):t[o]=r);return void 0!==t.createPage&&(e.createPage=t.createPage),void 0!==t.debug&&(e.debug=Number(t.debug)),t}}},convertParam=window.convertParam=function(e){e.hasload=1,cdn=e.cdn,loginAdd=e.loginAdd,debugMode=Number(e.debug),void 0!==e.createPage&&(createPage=window.createPage=Number(e.createPage)),e.hideCharge&&(srole="srole"in e?Number(e.srole):0),"bgType"in e&&(bgType=Number(e.bgType),bgUrl=e.bgUrl),"logoType"in e&&(logoType=Number(e.logoType),logoUrl=e.logoUrl),"isEgret"in e&&(isEgret=e.isEgret),loginVersion=e.version+"_5","worker"in e&&(useWorker=e.worker),void 0===e.designWidth&&(e.designWidth=640,e.designHeight=1136),void 0===e.isFullScreen&&(e.isFullScreen=1),window.cdn||(window.cdn=cdn,window.loginAdd=loginAdd,window.debugMode=debugMode,window.createPage=createPage,window.loginVersion=loginVersion),window.screenW||(window.screenW=screenW,window.screenH=screenH);for(var i in e)e[i]},writeLog=window.writeLog=function(e){},loadJsListAsync=function(e,i){var n=0,o=function(){loadSingleScript(e[n],function(){++n>=e.length?i&&i():o()})};o()},loadJsListSync=function(e,i){function n(){++o>=e.length&&i&&i()}for(var o=0,t=e.length-1;0<=t;t--)loadSingleScript(e[t],n)},showAlert=window.showAlert=function(e){onWXMini||onBDMini?window[onWXMini?"wx":"swan"].showModal({title:"提 示",content:e,showCancel:!1}):"function"==typeof alert&&alert(e)},httpLoad=window.httpLoad=function(e,i,n){var o=null;window.XMLHttpRequest?o=new XMLHttpRequest:showAlert("该浏览器不支持xhr"),i?(o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):o.open("GET",e,!0),o.responseType="text",o.onerror=function(){console.log("网络异常，请检查您的网络设置后再打开游戏"+e)},o.onload=function(){200!==o.status&&0!==o.status?e.indexOf("gameDataLog.php")<0?showAlert(e+"网络异常："+o.status):console.log(e+"网络异常："+o.status):n&&n(o.responseText)},o.send(i||null)},removeBg=window.removeBg=function(){var e=document.getElementById("loadBg");e&&e.parentNode&&e.parentNode.removeChild(e);var i=document.getElementById("isLoadingTxt");i&&i.parentNode&&i.parentNode.removeChild(i)},xxInitfuncs=window.xxInitfuncs=[],initReleaseGameMain=window.initReleaseGameMain=function(){onUpdateProgress("main.");for(var e=MainVersion.mainList.concat(),i=0,n=e.length;i<n;i++){var o=e[i];xxInitfuncs.push("xxInit"+o.substring(0,o.indexOf("."))),e[i]=MainVersion.conversionUrl(o)}onWXMini?initWXGameMain():onBDMini?initBDGameMain():loadJsListSync(e,newGameMain)},initDebugGameMain=window.initDebugGameMain=function(){if(onUpdateProgress("main."),3==debugMode){for(var e=MainVersion.mainList.concat(),i=0,n=e.length;i<n;i++){var o=e[i];xxInitfuncs.push("xxInit"+o.substring(0,o.indexOf("."))),e[i]=MainVersion.conversionUrl(o)}loadJsListSync(e,newGameMain)}else{var t=addVerNum(gameJSList,gameCdn);loadJsListAsync(t,newGameMain)}};function newGameMain(){for(var e=0,i=xxInitfuncs.length,n=0;n<i&&xxInitfuncs[n]in window;n++)e++;if(e==i)for(n=0;n<i;n++)window[xxInitfuncs[n]](window);(gameMainClazz=window.xxGameMain)&&!window.gameMain&&laya2Inited&&gameLogin.couldLogin&&(gameMain=window.gameMain=new gameMainClazz,isCreate&&writeLog(15))}function addVerNum(e,i){var n;n=window.conch||2==debugMode?"":"?v="+(0==debugMode?loginVersion:Math.random());for(var o=[],t=0,a=e.length;t<a;t++)o.push(i+e[t]+n);return o}var initGameLogin=function(){if(isEgret)layaInited=!0,newGameLogin();else{var e=addVerNum(["libs/GameCore1.min.js","GameLogin.min.js"],window.conch?"":cdn);loadJsListAsync(e,function(){layaInited=!0,newGameLogin()})}},newGameLogin=window.newGameLogin=function(){if(layaInited&&canInitLogin&&!gameLogin){if(onWXMini||onBDMini){if(!window.storageDic)return;console.log("onIos:"+onXXIOS)}else{var e=window.navigator.platform,i=window.navigator.userAgent;window.debuggap&&0<debugMode&&-1<i.indexOf("Mobile")&&window.debuggap.css(document.querySelector("#debuggapBlock"),{display:"block"});var n=-1<i.indexOf("Mobile")&&(-1<i.indexOf("MicroMessenger")||-1<i.indexOf("QQBrowser"));if(console.log("nav.pf:"+e+" onIos:"+onXXIOS+" onQQBrower:"+n),onXXIOS&&n&&(-1<e.indexOf("iPhone")||-1<e.indexOf("iPod")||-1<e.indexOf("iPad"))){var o=document.createElement("div");o.id="xxinputdiv",o.style.cssText="position:absolute;visibility:hidden;z-index:100;left:60px;top:60px",o.innerHTML='<textarea id="xxinput" style="position: absolute;font-size:20px;width:inherit;" rows="4" onchange="changeTxtarea(this)" oninput="changeTxtarea(this)" onkeyup="changeTxtarea(this)"></textarea>',document.body.appendChild(o)}}gameLogin=window.gameLogin=new GameLogin,clearBar()}};function enterXXGame(){initParam(),1<debugMode?isEgret||httpLoad(cdn+"manifest.json","",function(e){var i;try{i=JSON.parse(e)}catch(e){i=null;var n="[manifest.json文件解析出错，请检查该文件内容]";throw e.message?e.message+=n:e.message=n,showAlert(n),e}if(i){var o=i.layaInitial.concat(),t="";if(gameJSList=[],i.game)for(var a=0,r=i.game;a<r.length;a++){var s=r[a];s.search(".js.map")<0&&(t=s.replace("bin-debug","js"),gameJSList.push(t))}var l=addVerNum(o,cdn);loadJsListAsync(l,function(){laya2Inited=layaInited=!0,newGameLogin()})}}):window.h5vars&&initGameLogin()}enterXXGame();